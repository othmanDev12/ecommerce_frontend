<div class="mt-4">
  <div class="row justify-content-between">
    <div class="col-md-10">
      <h1>Products</h1>
    </div>
    <div class="col-md-2">
      <button class="btn btn-success" (click)="onCreateProduct()">
        <i class="fas fa-plus"></i> Create Product
      </button>
    </div>
  </div>
</div>

<!-- Search Input  -->
<div class="mt-2">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <mat-form-field class="input-width">
        <mat-label>Search</mat-label>
        <input matInput placeholder="Type what you want..." [(ngModel)]="filteringValue"
        (input)="onFilteringValue(filteringValue)">
      </mat-form-field>
    </div>
  </div>
</div>

<!--table that hold the data -->
<div class="mt-1">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <table style="width: 100%" mat-table [dataSource]="products"  matSort class="mat-elevation-z8">
        <ng-container matColumnDef="image">
          <th mat-header-cell *matHeaderCellDef> image</th>
          <td mat-cell *matCellDef="let product"><img class="image" src="data:image/jpeg;base64,{{product.image}}"></td>
        </ng-container>
        <ng-container matColumnDef="productName">
          <th mat-header-cell *matHeaderCellDef > Product Name</th>
          <td *matCellDef="let product">{{product.productName}}</td>
        </ng-container>

        <ng-container matColumnDef="brand">
          <th mat-header-cell *matHeaderCellDef  >Brand</th>
          <td mat-cell *matCellDef="let product">{{product.brand}}</td>
        </ng-container>

        <ng-container matColumnDef="generation">
          <th mat-header-cell *matHeaderCellDef>Generation</th>
          <td mat-cell *matCellDef="let product">{{product.generation}}</td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let product"><button class="btn btn-warning btn-sm"  (click)="onDetailProduct(product.category.categoryId , product.promotion.promotionId , product.productId)"  >details</button> </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="promotionColumns"></tr>
        <tr mat-row *matRowDef="let product; columns: promotionColumns "></tr>
      </table>

      <mat-paginator
        class="mat-elevation-z8"
        [length]="totalElements"
        [pageSize]="size"
        [pageSizeOptions]="[6 , 12 , 20  , 30 ,  40]"
        (page)="pageEvent = $event ; onPaginateChange($event)"
        showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>

